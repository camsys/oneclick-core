-# Takes a record collection and an array of symbols for column names/methods
%table.table{class: local_assigns[:class] || ""}
  %thead.thead-default
    %tr
      -columns.each do |col|
        %th
          =col.to_s.titleize
      %th
        Edit
  %tbody
    -records.each do |record|
      %tr
        -columns.each do |col|
          %td
            =record.send(col)
          %td
            =simple_form_for record, url: admin_custom_geographies_url do |f|
              = f.input :id,
                value: record.id,
                readonly: true,
                wrapper_html: {class:'hidden'}
              -if current_user.superuser?
                = f.input :agency,
                  collection: TransportationAgency.all,
                  selected: record.agency&.id,
                  wrapper_html: {class:'col-md-6'}
              - if current_user.transportation_admin?
                = f.input :agency,
                  collection: [current_user.staff_agency],
                  selected: record.agency&.id,
                  readonly: true,
                  wrapper_html: {class:'col-md-6'}
              -if current_user.currently_oversight?
                = f.input :agency,
                  collection: current_user.accessible_agencies,
                  selected: record.agency&.id,
                  wrapper_html: {class:'col-md-6'}
              -if current_user.currently_transportation?
                = f.input :agency,
                  collection: [current_user.staff_agency],
                  selected: record.agency&.id,
                  readonly: true,
                  wrapper_html: {class:'col-md-6'}
              = f.button :submit, 'Update Geography',
                class: 'btn btn-primary'
