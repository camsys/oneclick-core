%table
  %tr
    %td
      =image_tag(attachments["start.png"].url, height: 26, width: 26, style: 'vertical-align: top;')
    %td
      %h3
        = "Start " + itinerary.trip.origin.name
      = itinerary.start_time.in_time_zone.strftime('%l:%M %p').strip
  %br
  -itinerary.legs.each do |leg|
    %tr
      %td{style: "vertical-align:top;"}
        =image_tag(attachments[get_mode_icon(leg['mode'])].url, height: 26, width: 26, style: 'vertical-align: top;')
      %td
        %h3
          ="#{Time.at(leg['startTime']/1000).strftime('%l:%M %p').strip}: #{short_description(leg)}"
        %h4
          =[duration_to_words(leg['duration']), exact_distance_to_words(leg['distance'])].join(', ')
        = html_steps(leg['steps'])
        
  %br  
  %tr
    %td
      =image_tag(attachments["stop.png"].url, height: 26, width: 26, style: 'vertical-align: top;')
    %td
      %h3
        = "Arrive " + itinerary.trip.destination.name
      = itinerary.end_time.in_time_zone.strftime('%l:%M %p').strip
%td{style: "text-align: center;", colspan: 2}
  %div{style: "width:100%;background: white; border-radius: 5px; padding: 10px;"}
    =image_tag(attachments[itinerary.id.to_s + ".png"].url)
